# Project : C-subset compiler - subc
### 프로젝트 소개 
C언어의 일부 문법을 컴파일하는 컴파일러를 구현하는 프로젝트입니다.

컴파일러의 동작 원리에 대한 심도있는 이해와 메모리 관리 능력과 구조적 설계 등의 전반적인 개발 능력 향상을 위해 진행되었습니다.

구현에는 C언어와 flex, bison을 활용했습니다.
**********
### 주요 기능
  - **선언 및 스코프(scope) 관리**
    - 변수 및 함수 중복 선언 검사
    - 선언되지 않은 변수 및 함수 사용 검사
    - 변수의 유효 범위(scope) 검사  
  - **자료형 검사**
    - 대입 연산 : L-Value, R-Value 및 자료형 호환 검사
    - 이항 연산 : 동일 자료형간 연산 규칙  검사
    - 포인터 연산자 : '*' 연산자의 피연산자 타입(포인터 타입), '&'의 피연산자 L-value 검사
    - 구조체 연산자 : '.' 연산자의 피연산자 타입(구조체 타입), '->'의 피연산자 타입(구조체 포인터 타입), 멤버 변수 여부 검사
  - **함수 관련 검사**
    - 반환형 : 함수 선언 자료형과 실제 return문의 자료형 일치 검사
    - 인자 전달 : 함수 호출 시 argument와 parameter의 자료형과 개수 일치 검사
**********
### 후기
  이 프로젝트는 나의 부족함을 정면으로 비추는 거울과도 같다.

  **태도**

  
  반복되는 메모리 오류와 잘못된 출력은 코드 실행 자체에 두려움과 자괴감을 느끼게 했다. 퇴사 후 편입을 준비하며 느꼈던 '실패하면 어떡하지?'라는 막막함과 비슷한 감정이었다.

  돌이켜보면 과거의 막막한 감정이 편입 준비에 더 힘을 쏟게 했듯이 이번 프로젝트의 자괴감과 두려움 역시 포기하지 않게 하는 역설적인 원동력이 되었다. 이 경험으로 '두렵다고 피하면 제자리 걸음'이라는 사실을 깨달았다.

  문제를 다루는 태도에서도 느낀 바가 있다. 초기에는 오류가 발생하면 어림짐작으로 이 부분을 고쳐볼까? 하는 식으로 처리했다. 물론 해결되는 경우도 있지만 안되는 경우가 더 많았꼬 시간만 잡아먹는 행위였다.

  방법을 바꿔서 오류 발생 지점부터 역으로 추적하며 디버깅하니 더 빠르게 원인을 찾을 수 있었고, 작성한 코드의 흐름도 더 잘 이해할 수 있었다. 사실 이 부분은 운영체제 과제를 하며 고쳤다고 생각했는데 역시 습관은 하루 아침에 바뀌지 않는 듯하다. 아직까지는 고친다기 보다는 관리한다는 생각을 다루자

  **기술**

  
  기술적인 부분에서 특히 아쉬움이 남는다.

  첫 째로 구조적 설계의 중요성이다. 구조에 대해 깊게 고찰하지 않고 눈 앞의 기능 구현에 급급하다보니 뒤로 갈수록 코드가 꼬였고 시간 압박 속에서 하드 코딩으로 타햡하게 됐다. 더 나은 구조를 고민했다면 좀 더 깔끔한 코드가 작성되었을 탠데 하는 아쉬움이 남는다.

  둘 째로 메모리 관리의 어려움을 크게 느꼈다. 메모리 누수를 잡아 추가 점수를 받고 싶었지만, 로직이 복잡해지며 segmentation fault와 double free 등의 오류를 마주하고 관리를 뒤로 미뤄야 했다. 특히 아쉬운 것은 전역 변수의 상태 오염이다. 이 부분은 아직도 해결하지 못한 부분이라서 앞으로 메모리 관리에 좀 더 신경써야 하는 목표가 되었다.

  **결론**

  
  이 프로젝트는 C언어와 컴파일러에 대한 이해만을 남기지 않았다. 어려움에 봉착했을 때 이를 다루는 태도와 마음가짐을 다잡게 해준 경험이다. 아쉬움이 많이 남은 만큼 나에게 큰 도전이었던 이 프로젝트를 완수했다는 사실은 내개 자신감을 주고 앞으로 있을 더 큰 도전에 용기를 줄 것 이다.
    
****************
### 개발 환경
  - **Language :** C언어
  - **Tools :** flex, Bison
  - **OS :** ubuntu
### 빌드 및 실행
  1. 빌드 : `make`
  2. 실행 : ```./subc test/*.c```

     `e.g) ./subc test/var_def.c`
### 파일 구성
```bash
├── Completed
│   ├── subc.l              # Lexical Analyzer : 소스 코드를 토큰으로 분리
│   ├── subc.y              # Parser & Semantic Analyzer : 토큰의 문법 검사 및 의미를 분석
│   ├── subc.h              # Header : 전역 변수, 심볼 테이블 등의 자료구조 및 함수 선언
│   └── senatic.c           # Semantic Analyzer : 의미 분석 함수 구현
├── SkeletonCode            # 구현 기반이 되는 스켈레톤 코드
│   ├── subc.l
│   ├── subc.y
│   └── subc.h
└── test                    # 테스트 코드 및 결과
    ├── var_def.c           # 변수 선언
    ├── str_op.c            # 구조체 연산
    ├── ptr_op.c            # 포인터 연산
    ├── func_op.c           # 함수 연산
    ├── var_def.txt         # 변수 선언 결과
    ├── str_op.txt          # 구조체 연산 결과
    ├── ptr_op.txt          # 포인터 연산 결과
    └── func_op.txt         # 함수 연산 결과
```
